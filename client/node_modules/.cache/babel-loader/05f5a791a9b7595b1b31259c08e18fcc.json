{"ast":null,"code":"import _defineProperty from \"/Users/globalintegrity/Desktop/globalcustomerbookings/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/globalintegrity/Desktop/globalcustomerbookings/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/globalintegrity/Desktop/globalcustomerbookings/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/globalintegrity/Desktop/globalcustomerbookings/client/src/pages/Issuereport.js\";\nimport { Col, Row, Container } from \"../components/Grid\";\nimport Jumbotron from \"../components/Jumbotron\";\nimport pic1 from \"./images/jorge.jpeg\";\nimport React, { useState, useEffect } from \"react\";\nimport DeleteBtn from \"../components/DeleteBtn\";\nimport API from \"../utils/API\";\nimport { List, ListItem } from \"../components/List\";\nimport { Input, FormBtn } from \"../components/Form\";\nimport emailjs from \"emailjs-com\";\n\nfunction Issuereport() {\n  var _this = this;\n\n  // Setting our component's initial state\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      issuereports = _useState2[0],\n      setIssuereports = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      formObject = _useState4[0],\n      setFormObject = _useState4[1]; // Load all books and store them with setBooks\n\n\n  useEffect(function () {\n    loadIssuereports();\n  }, []); // Loads all books and sets them to books\n\n  function loadIssuereports() {\n    API.getIssuereports().then(function (res) {\n      return setIssuereports(res.data);\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  }\n\n  ; // Deletes a book from the database with a given id, then reloads books from the db\n\n  function deleteIssuereport(id) {\n    API.deleteIssuereport(id).then(function (res) {\n      return loadIssuereports();\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  } // Handles updating component state when the user types into the input field\n\n\n  function handleInputChange(event) {\n    var _event$target = event.target,\n        name = _event$target.name,\n        value = _event$target.value;\n    setFormObject(_objectSpread({}, formObject, _defineProperty({}, name, value)));\n  }\n\n  ; // When the form is submitted, use the API.saveBook method to save the book data\n  // Then reload books from the database\n\n  function handleFormSubmit(event) {\n    event.preventDefault();\n\n    if (formObject.issue && formObject.contact) {\n      API.saveIssuereport({\n        issue: formObject.issue,\n        contact: formObject.contact,\n        emailaddress: formObject.emailaddress\n      }).then(alert(\"FORM SUBMITTED, THANK YOU FOR HELPING MAKE GLOBAL INTEGRITY DOT COM A BETTER PLACE!!!\")).then(function (res) {\n        return loadIssuereports();\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n\n    emailfunction();\n  }\n\n  ;\n\n  function emailfunction() {\n    var templateParams = {};\n    emailjs.send('default_service', 'template_8zRI4Sfy', templateParams, \"user_cik0Rx7PoC1jSZScZR0Em\").then(function (response) {\n      console.log('SUCCESS!', response.status, response.text);\n    }, function (error) {\n      console.log('FAILED...', error);\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    size: \"lg-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Jumbotron, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 15\n    }\n  }, \"Leave a review about your experience with Global Integrity\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    style: {\n      marginLeft: 25\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    onChange: handleInputChange,\n    name: \"issue\",\n    placeholder: \"What is the issue with Global Integrity Dot Com? (Input Required)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    onChange: handleInputChange,\n    name: \"contact\",\n    placeholder: \"Enter your email address if you would like us to contact you about this issue.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(FormBtn, {\n    disabled: !formObject.issue,\n    onClick: handleFormSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  }, \"Submit this issue!\"))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    size: \"lg-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 16\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 12\n    }\n  }, \"User Site Issues\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 12\n    }\n  }), issuereports.length ? /*#__PURE__*/React.createElement(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  }, issuereports.map(function (issuereport) {\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: issuereport._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"media-left\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"figure\", {\n      className: \"image is-96x96\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: pic1,\n      alt: \"an anonymous site user\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"b\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }\n    }, \"Anonymous\"), \" stated: \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 38\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"b\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 48\n      }\n    }, issuereport.issue), /*#__PURE__*/React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 74\n      }\n    }), \" About Global Integrity Dot Com \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 115\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 124\n      }\n    }), \" On \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 137\n      }\n    }), issuereport.date), /*#__PURE__*/React.createElement(DeleteBtn, {\n      onClick: function onClick() {\n        return deleteIssuereport(issue._id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 21\n      }\n    }));\n  })) : /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  }, \"No Results to Display\")))));\n}\n\nexport default Issuereport;","map":{"version":3,"sources":["/Users/globalintegrity/Desktop/globalcustomerbookings/client/src/pages/Issuereport.js"],"names":["Col","Row","Container","Jumbotron","pic1","React","useState","useEffect","DeleteBtn","API","List","ListItem","Input","FormBtn","emailjs","Issuereport","issuereports","setIssuereports","formObject","setFormObject","loadIssuereports","getIssuereports","then","res","data","catch","err","console","log","deleteIssuereport","id","handleInputChange","event","target","name","value","handleFormSubmit","preventDefault","issue","contact","saveIssuereport","emailaddress","alert","emailfunction","templateParams","send","response","status","text","error","marginLeft","length","map","issuereport","_id","date"],"mappings":"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","sourcesContent":["import { Col, Row, Container } from \"../components/Grid\";\nimport Jumbotron from \"../components/Jumbotron\";\nimport pic1 from \"./images/jorge.jpeg\";\nimport React, { useState, useEffect } from \"react\";\nimport DeleteBtn from \"../components/DeleteBtn\";\nimport API from \"../utils/API\";\nimport { List, ListItem } from \"../components/List\";\nimport { Input, FormBtn } from \"../components/Form\";\nimport emailjs from \"emailjs-com\";\n\nfunction Issuereport() {\n\n  // Setting our component's initial state\n  const [issuereports, setIssuereports] = useState([])\n  const [formObject, setFormObject] = useState({})\n\n  // Load all books and store them with setBooks\n  useEffect(() => {\n    loadIssuereports()\n  }, [])\n\n  // Loads all books and sets them to books\n  function loadIssuereports() {\n    API.getIssuereports()\n      .then(res => \n        setIssuereports(res.data)\n      )\n      .catch(err => console.log(err));\n  };\n\n  // Deletes a book from the database with a given id, then reloads books from the db\n  function deleteIssuereport(id) {\n    API.deleteIssuereport(id)\n      .then(res => loadIssuereports())\n      .catch(err => console.log(err));\n  }\n\n  // Handles updating component state when the user types into the input field\n  function handleInputChange(event) {\n    const { name, value } = event.target;\n    setFormObject({...formObject, [name]: value})\n  };\n\n  // When the form is submitted, use the API.saveBook method to save the book data\n  // Then reload books from the database\n  function handleFormSubmit(event) {\n    \n    event.preventDefault();\n    if (formObject.issue && formObject.contact) {\n      API.saveIssuereport({\n        issue: formObject.issue,\n        contact: formObject.contact,\n        emailaddress: formObject.emailaddress\n      })\n        .then(alert(\"FORM SUBMITTED, THANK YOU FOR HELPING MAKE GLOBAL INTEGRITY DOT COM A BETTER PLACE!!!\"))\n        .then(res => loadIssuereports())\n        .catch(err => console.log(err));\n    }\n    emailfunction();\n  };\n  function emailfunction() {\n\n  var templateParams = {\n      \n  }\n    \n    emailjs.send('default_service', 'template_8zRI4Sfy', templateParams, \"user_cik0Rx7PoC1jSZScZR0Em\")\n    .then(function(response) {\n       console.log('SUCCESS!', response.status, response.text);\n    }, function(error) {\n       console.log('FAILED...', error);\n    })\n  }\n  return (\n    <Container fluid>\n        <Row>\n          <Col size=\"lg-12\">\n            \n              \n            \n            <Jumbotron>\n              <h3>Leave a review about your experience with Global Integrity</h3>\n              <br></br>\n            <form style={{marginLeft:25}}>\n              <Input\n                onChange={handleInputChange}\n                name=\"issue\"\n                placeholder=\"What is the issue with Global Integrity Dot Com? (Input Required)\"\n              />\n              <Input\n                onChange={handleInputChange}\n                name=\"contact\"\n                placeholder=\"Enter your email address if you would like us to contact you about this issue.\"\n              />\n              <br></br>\n              <FormBtn\n                disabled={!(formObject.issue )}\n                onClick={handleFormSubmit}\n                \n              >\n                Submit this issue!\n              </FormBtn>\n            </form>\n            </Jumbotron>\n            <br></br>\n          </Col>\n         \n        </Row>\n      <Row>\n        <Col size=\"lg-12\">\n          <div><div className=\"card\"></div>\n        <div className=\"card-image\"></div>\n        <br></br>\n           <strong>User Site Issues</strong>\n           <hr></hr>\n           {issuereports.length ? (\n              <List>\n                {issuereports.map(issuereport => (\n                  <ListItem key={issuereport._id}>\n                    \n                      <strong>\n                      <div className=\"media-left\">\n              <figure className=\"image is-96x96\">\n                <img src={pic1} alt=\"an anonymous site user\"></img>\n              </figure>\n              <br></br>\n              \n            </div>\n            <br></br> \n            <br></br> \n            <b>Anonymous</b> stated: <br></br> <b>{issuereport.issue}</b><br></br> About Global Integrity Dot Com <br></br><br></br> On <br></br>{issuereport.date} \n                      </strong>\n                    \n                    <DeleteBtn onClick={() => deleteIssuereport(issue._id)} />\n                  </ListItem>\n                ))}\n              </List>\n            ) : (\n              <h3>No Results to Display</h3>\n            )}\n        \n            \n            </div>\n          \n         \n         \n        </Col>\n      </Row>\n      \n    </Container>\n  );\n}\n\nexport default Issuereport;\n"]},"metadata":{},"sourceType":"module"}